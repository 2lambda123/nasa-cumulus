#!/bin/bash

set -e

version=v0.0.1
progname=$(basename $0)
docstr="$progname $version: builds the component, placing compiled output in dist/"

usage() {
echo "Usage:
  $progname

Examples:
  $progname
"
}

function echoerr() {
    echo "Error: $@" 1>&2;
}

if [ $# -ne 0 ]; then
    echo "$docstr"
    echo
    usage
    exit 1
fi

# Moving toward the Cumulus model of building individual tasks
for task in run-gdal; do
    pushd tasks/$task
    npm run build
    rm -rf ../../dist/$task
    mv dist ../../dist/$task
    popd
done

./node_modules/.bin/webpack
